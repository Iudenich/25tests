# Проект 25tests

## Файл с тестами:

*TodoApiTest.kt*

## Инструкция по установке

1. Склонируйте репозиторий:
   ```bash
   git clone https://github.com/Iudenich/25tests.git
   ```
2. Перейдите в папку проекта:
   ```bash
   cd 25tests
   ```
3. Установите необходимые зависимости:
   ```bash
   ./gradlew build
   ```

## Запуск тестов

Для выполнения тестов используйте следующую команду:
```bash
./gradlew test
```

## Запуск тестов из среды разработки (IDE)

1. Откройте проект в IntelliJ IDEA. 
2. Перейдите к классу TodoApiTest. 
3. Запустите тесты, нажав на значок запуска рядом с объявлением класса или отдельными тестовыми методами.


## Чеклист тестирования
### GET /todos
1. Проверка граничных значений параметров offset и limit. 
2. Поведение при отсутствии параметров offset и limit. 
3. Обработка нечисловых значений в параметрах offset и limit. 
4. Проверка сортировки и порядка возвращаемых задач. 
5. Проверка максимального лимита возвращаемых элементов.

### POST /todos
1. Создание задачи с корректными данными. 
2. Создание задачи с пустым текстом (ожидается ошибка). 
3. Попытка создания задачи с дублирующимся ID (ожидается ошибка). 
4. Создание задачи с отсутствующими полями (ожидается ошибка). 
5. Отправка задачи с некорректным Content-Type (ожидается ошибка).

### PUT /todos/{id}
1. Обновление существующей задачи с корректными данными. 
2. Попытка обновления несуществующей задачи (ожидается ошибка). 
3. Несоответствие ID в URL и теле запроса (ожидается ошибка). 
4. Обновление с некорректными данными (ожидается ошибка). 
5. Обновление с некорректным Content-Type (ожидается ошибка).

### DELETE /todos/{id}
1. Удаление существующей задачи с корректной авторизацией. 
2. Попытка удаления без авторизации (ожидается ошибка). 
3. Удаление с некорректными учетными данными (ожидается ошибка). 
4. Удаление несуществующей задачи (ожидается ошибка). 
5. Обработка некорректного формата ID при удалении (ожидается ошибка).

### WebSocket /ws
1. Установление соединения по WebSocket. 
2. Получение обновлений через WebSocket при изменении задач. 
3. Попытка подключения по некорректному пути (ожидается ошибка). 
4. Корректная обработка закрытия соединения по WebSocket. 
5. Попытка подключения по некорректному порту (ожидается ошибка).

## Результаты нагрузочного тестирования

### Проверка производительности эндпоинта POST /todos
#### Параметры нагрузочного тестирования:

- Количество потоков (Threads): 1000 
- Период разгона (Ramp-Up Period): 100 секунд 
- Количество циклов (Loop Count): 100

#### Результаты тестирования:

- Общее количество запросов (Samples): 111 000 
- Среднее время отклика (Average): менее 1 мс 
- Медиана (Median): 1 мс 
- 90-й перцентиль (90% Line): 2 мс 
- 95-й перцентиль (95% Line): 2 мс 
- 99-й перцентиль (99% Line): 8 мс 
- Минимальное время отклика (Min): менее 1 мс 
- Максимальное время отклика (Max): 104 мс 
- Процент ошибок (Error %): 6,25% 
- Пропускная способность (Throughput): 466,87 запросов/сек

### Выводы:

*Эндпоинт POST /todos демонстрирует высокую производительность и низкое время отклика даже при значительной нагрузке. Однако процент ошибок в 6,25% указывает на проблемы при высокой нагрузке, требующие дополнительного анализа и оптимизации сервиса.*